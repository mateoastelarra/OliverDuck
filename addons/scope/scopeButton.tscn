[gd_scene load_steps=5 format=3 uid="uid://dhfxix5wyx521"]

[ext_resource type="Texture2D" uid="uid://bidk3f4460a2o" path="res://addons/scope/crosshairDisabled.svg" id="1_ak3b3"]
[ext_resource type="Texture2D" uid="uid://bxky60ol5p4jc" path="res://addons/scope/crosshair.svg" id="1_udyj4"]

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_ykhxj"]
load_path = "res://.godot/imported/crosshair.svg-3d9e1fa3acf1a4efed55310fbcb18227.ctex"

[sub_resource type="GDScript" id="GDScript_ak3b3"]
script/source = "@tool
extends Control

func _on_scope_button_pressed():
	var sceneParent = null
	for c in get_tree().root.find_children(\"Scene\", \"\", true, false):
		if c is VBoxContainer: 
			sceneParent = c
			break
	var sceneEditor = sceneParent.find_child(\"*SceneTreeEditor*\", false, false)
	var tree:Tree = sceneEditor.find_child(\"*Tree*\", false, false)
	if tree.get_selected() != null:
		tree.scroll_to_item(tree.get_selected(), true)
		
	# Expandir autom√°ticamente todos los padres hasta el nodo seleccionado en el SceneTree
	var selected := tree.get_selected()
	if selected == null:
		return
	var path_items: Array = []
	var current := selected
	while current:
		path_items.append(current)
		current = current.get_parent()
	path_items.reverse()
	
	for item in path_items:
		item.set_collapsed(false) 
	tree.scroll_to_item(selected, true)
	tree.queue_redraw()
"

[node name="ScopeButton" type="TextureButton"]
texture_filter = 1
custom_minimum_size = Vector2(24, 24)
anchors_preset = -1
anchor_right = 0.0555556
anchor_bottom = 0.0987654
grow_horizontal = 2
grow_vertical = 2
texture_normal = SubResource("CompressedTexture2D_ykhxj")
texture_pressed = ExtResource("1_udyj4")
texture_hover = SubResource("CompressedTexture2D_ykhxj")
texture_disabled = ExtResource("1_ak3b3")
texture_focused = SubResource("CompressedTexture2D_ykhxj")
ignore_texture_size = true
stretch_mode = 4
script = SubResource("GDScript_ak3b3")
metadata/_edit_use_anchors_ = true

[connection signal="pressed" from="." to="." method="_on_scope_button_pressed"]
